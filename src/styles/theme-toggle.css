/* Scoped to .theme-toggle */
.theme-toggle input {
  opacity: 0;
  width: 0;
  height: 0;
}

/* Slider container */
.theme-toggle .slider {
  position: absolute;
  cursor: pointer;
  inset: 0;
  background-color: var(--accent);
  transition: background-color 0.4s;
  z-index: 0;
  overflow: hidden;
  will-change: background-color, opacity;
}

.theme-toggle .slider.round { border-radius: 34px; }

/* Sun/Moon knob */
.theme-toggle .sun-moon {
  position: absolute;
  height: 26px;
  width: 26px;
  left: 4px;
  bottom: 4px;
  background-color: #FFD54A; /* sun color in light mode */
  /* از transform جمع‌وجور استفاده نکن؛ translate جدا باشد تا با rotate تداخل نکند */
  translate: 0 0;
  transition: translate 0.4s, background-color 0.4s;
  border-radius: 50%;
  will-change: translate, rotate;
}

/* Dark rail */
.theme-toggle input:checked + .slider {
  background-color: var(--brand-900); /* dark rail */
}

/* Focus ring */
.theme-toggle input:focus + .slider {
  box-shadow: 0 0 0 2px color-mix(in srgb, var(--accent) 50%, transparent);
}

/* Move knob + forward spin when entering dark (night) */
.theme-toggle input:checked + .slider .sun-moon {
  translate: 26px 0;
  background-color: white;
  animation: spin-fwd 0.6s ease-in-out both;
}

/* Reverse spin when returning to light (day) */
.theme-toggle input:not(:checked) + .slider .sun-moon {
  animation: spin-rev 0.6s ease-in-out both;
}

@keyframes spin-fwd {
  from { rotate: 0deg; }
  to   { rotate: 360deg; }
}
@keyframes spin-rev {
  from { rotate: 0deg; }
  to   { rotate: -360deg; }
}

/* Moon craters */
.theme-toggle .moon-dot {
  opacity: 0;
  transition: opacity 0.4s;
  fill: #9CA3AF;
  position: absolute;
  z-index: 4;
}
.theme-toggle input:checked + .slider .sun-moon .moon-dot { opacity: 1; }

.theme-toggle #moon-dot-1 { left: 10px; top: 3px;  width: 6px;  height: 6px; }
.theme-toggle #moon-dot-2 { left: 2px;  top: 10px; width: 10px; height: 10px; }
.theme-toggle #moon-dot-3 { left: 16px; top: 18px; width: 3px;  height: 3px;  }

/* Sun rays (visible in light mode) */
.theme-toggle .light-ray {
  position: absolute;
  z-index: -1;
  fill: white;
  opacity: 0.1;
}
.theme-toggle #light-ray-1 { left: -8px;  top: -8px;  width: 43px; height: 43px; }
.theme-toggle #light-ray-2 { left: -50%; top: -50%; width: 55px; height: 55px; }
.theme-toggle #light-ray-3 { left: -18px; top: -18px; width: 60px; height: 60px; }

/* Clouds (ambient motion) */
.theme-toggle .cloud-light,
.theme-toggle .cloud-dark {
  position: absolute;
  animation-name: cloud-move;
  animation-duration: 6s;
  animation-iteration-count: infinite;
  will-change: transform;
}
.theme-toggle .cloud-light { fill: #eee; }
.theme-toggle .cloud-dark  { fill: #ccc; animation-delay: 1s; }

.theme-toggle #cloud-1 { left: 30px; top: 15px; width: 40px; }
.theme-toggle #cloud-2 { left: 44px; top: 10px; width: 20px; }
.theme-toggle #cloud-3 { left: 18px; top: 24px; width: 30px; }
.theme-toggle #cloud-4 { left: 36px; top: 18px; width: 40px; }
.theme-toggle #cloud-5 { left: 48px; top: 14px; width: 20px; }
.theme-toggle #cloud-6 { left: 22px; top: 26px; width: 30px; }

@keyframes cloud-move {
  0%   { transform: translateX(0px); }
  40%  { transform: translateX(4px); }
  80%  { transform: translateX(-4px); }
  100% { transform: translateX(0px); }
}

/* Stars (appear in dark mode) */
.theme-toggle .stars {
  transform: translateY(-32px);
  opacity: 0;
  transition: transform 0.4s, opacity 0.4s;
  will-change: transform, opacity;
}
.theme-toggle input:checked + .slider .stars {
  transform: translateY(0);
  opacity: 1;
}

.theme-toggle .star {
  fill: white;
  position: absolute;
  transition: transform 0.4s;
  animation-name: star-twinkle;
  animation-duration: 2s;
  animation-iteration-count: infinite;
  will-change: transform;
}
.theme-toggle #star-1 { width: 20px; top: 2px;  left: 3px;  animation-delay: 0.3s; }
.theme-toggle #star-2 { width: 6px;  top: 16px; left: 3px; }
.theme-toggle #star-3 { width: 12px; top: 20px; left: 10px; animation-delay: 0.6s; }
.theme-toggle #star-4 { width: 18px; top: 0px;  left: 18px; animation-delay: 1.3s; }

@keyframes star-twinkle {
  0%   { transform: scale(1); }
  40%  { transform: scale(1.2); }
  80%  { transform: scale(0.8); }
  100% { transform: scale(1); }
}
